<!DOCTYPE html>
<html>
  <head>
    <title>Rainbow Generator for Meili</title>
    <style>
      .rainbow {
        height: 100vh;
        background: linear-gradient(
          45deg,
          #e81416 0% 11%,
          #ffa500 17% 25%,
          #faeb36 31% 39%,
          #79c314 45% 53%,
          #487de7 59% 67%,
          #4b369d 73% 81%,
          #70369d 87% 100%);
      }
      button {
        width: 90%;
        font-size: xx-large;
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translate(-50%, 0);
      }
    </style>
  </head>
  <body class="rainbow">
    <button onclick="apply()">
        Give me a New Rainbow!
    </button>
    <script>
      const shuffle = array => {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          const temp = array[i];
          array[i] = array[j];
          array[j] = temp;
        }
      }
      const apply = () => {
        const colors = [
          "#e81416", "#ffa500", "#faeb36",
          "#79c314", "#487de7", "#4b369d", "#70369d",
        ];
        shuffle(colors);
        const angle = Math.floor(Math.random() * 180);
        let bg = `background: linear-gradient(${angle}deg`;
        const stopSize = Math.floor(100/colors.length);
        for(let i=0; i<colors.length; i++) {
          const begin = i == 0
            ? 0
            : Math.floor(i*stopSize) + 3;
          const end = i == colors.length - 1
            ? 100
            : Math.ceil((i+1)*stopSize) - 3;
          bg += `,${colors[i]} ${begin}% ${end}%`;
        }
        bg += ");";
        console.log(bg);
        let body = document.querySelector("body");
        body.style = bg;
      }
    </script>
  </body>
</html>

